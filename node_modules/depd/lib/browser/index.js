/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */

'use strict'

/**
 * Module exports.
 * @public
 */

module.exports = depd

/**
 * Create deprecate for namespace in caller.
 */

<<<<<<< HEAD
function depd(namespace) {
=======
function depd (namespace) {
>>>>>>> bcb7f0d615e8ce2970bf3e8904b809a2aa4ec6f8
  if (!namespace) {
    throw new TypeError('argument namespace is required')
  }

<<<<<<< HEAD
  function deprecate(message) {
=======
  function deprecate (message) {
>>>>>>> bcb7f0d615e8ce2970bf3e8904b809a2aa4ec6f8
    // no-op in browser
  }

  deprecate._file = undefined
  deprecate._ignored = true
  deprecate._namespace = namespace
  deprecate._traced = false
  deprecate._warned = Object.create(null)

  deprecate.function = wrapfunction
  deprecate.property = wrapproperty

  return deprecate
}

/**
 * Return a wrapped function in a deprecation message.
 *
 * This is a no-op version of the wrapper, which does nothing but call
 * validation.
 */

<<<<<<< HEAD
function wrapfunction(fn, message) {
=======
function wrapfunction (fn, message) {
>>>>>>> bcb7f0d615e8ce2970bf3e8904b809a2aa4ec6f8
  if (typeof fn !== 'function') {
    throw new TypeError('argument fn must be a function')
  }

  return fn
}

/**
 * Wrap property in a deprecation message.
 *
 * This is a no-op version of the wrapper, which does nothing but call
 * validation.
 */

<<<<<<< HEAD
function wrapproperty(obj, prop, message) {
=======
function wrapproperty (obj, prop, message) {
>>>>>>> bcb7f0d615e8ce2970bf3e8904b809a2aa4ec6f8
  if (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {
    throw new TypeError('argument obj must be object')
  }

  var descriptor = Object.getOwnPropertyDescriptor(obj, prop)

  if (!descriptor) {
    throw new TypeError('must call property on owner object')
  }

  if (!descriptor.configurable) {
    throw new TypeError('property must be configurable')
  }
<<<<<<< HEAD

  return
=======
>>>>>>> bcb7f0d615e8ce2970bf3e8904b809a2aa4ec6f8
}
